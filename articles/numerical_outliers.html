<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valeurs numériques extrêmes • evavelo</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Valeurs numériques extrêmes">
<meta property="og:description" content="evavelo">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">evavelo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ba-using_package.html">Utilisation de Eva-Scan</a>
    </li>
    <li>
      <a href="../articles/checking_input.html">Vérification de fichier</a>
    </li>
    <li>
      <a href="../articles/geocode_distance.html">Géocodage des distance</a>
    </li>
    <li>
      <a href="../articles/numerical_outliers.html">Valeurs numériques extrêmes</a>
    </li>
    <li>
      <a href="../articles/site_classification.html">Classification des sites</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JMPivette/evavelo/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="numerical_outliers_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Valeurs numériques extrêmes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JMPivette/evavelo/blob/HEAD/vignettes/numerical_outliers.Rmd" class="external-link"><code>vignettes/numerical_outliers.Rmd</code></a></small>
      <div class="hidden name"><code>numerical_outliers.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>La méthode EVA-VELO propose de vérifier différentes valeurs numériques afin d’éliminer les valeurs extrêmes qui seraient liées à une erreur de saisie.</p>
<p>Les champs de l’enquête à vérifier sont:</p>
<ul>
<li><code>km_sortie</code></li>
<li><code>revenu</code></li>
<li><code>dms</code></li>
<li><code>tour_dep_xxx</code></li>
</ul>
<p>Eva-Scan permet d’identifier ces valeurs “extrêmes” sans pour autant modifier le fichier Excel. Ces valeurs identifiées doivent en effet être revues manuellement pour vérifier s’il s’agit d’une erreur de saisie ou non.</p>
<p>La vérification s’effectue par l’appel à la fonction <code><a href="../reference/check_num_outliers.html">check_num_outliers()</a></code> ou en cliquant sur <strong>Chercher valeurs numériques anormales</strong> dans l’application web.</p>
</div>
<div class="section level2">
<h2 id="valeurs-anormales">Valeurs anormales<a class="anchor" aria-label="anchor" href="#valeurs-anormales"></a>
</h2>
<div class="section level3">
<h3 id="revenu-revenu">Revenu [revenu]<a class="anchor" aria-label="anchor" href="#revenu-revenu"></a>
</h3>
<p>L’ensemble des revenus de l’enquête sont analysés:</p>
<ul>
<li>Le premier et le dernier centile sont identifiés</li>
<li>Des valeurs supplémentaire sont identifiées en utilisant la méthode du “1,5 x IQR”:</li>
</ul>
<p>Cette méthode consiste à détecter le premier quartile (Q1) et le dernier quartile (Q3) puis de calculer l’<a href="https://fr.wikipedia.org/wiki/%C3%89cart_interquartile" class="external-link">écart interquartile</a> IQR = Q3 - Q1 .</p>
<p>Nous détectons ensuite toutes les valeurs supérieures à <code>Q3 + 1,5 x IQR</code> et toutes celles inférieures à <code>Q1 - 1,5 x IQR</code>.</p>
</div>
<div class="section level3">
<h3 id="distance-de-la-sortie-km_sortie">Distance de la sortie [km_sortie]<a class="anchor" aria-label="anchor" href="#distance-de-la-sortie-km_sortie"></a>
</h3>
<p>La méthode de détection des valeurs extrêmes sur <code>km_sortie</code> est la même que pour <code>revenu</code> avec une analyse séparée pour chacune des <code>categorie_corrigee</code>.</p>
</div>
<div class="section level3">
<h3 id="durée-moyenne-de-séjour-dms">Durée moyenne de séjour [dms]<a class="anchor" aria-label="anchor" href="#dur%C3%A9e-moyenne-de-s%C3%A9jour-dms"></a>
</h3>
<p>Les valeurs de dms suivantes sont identifiées:</p>
<ul>
<li>Le premier et le dernier centile</li>
<li>La méthode “1,5 x IQR”</li>
<li>Les valeurs inférieures à 1</li>
<li>Les valeurs égales à 365</li>
</ul>
<p>Pour ces analyses, le regroupement se fait par <code>mode_heb_regroupe</code>. Si jamais un groupe a plus de 200 réponses, il est subdivisé en fonction de <code>categorie_corrige_corrige</code> sans pour autant créer de groupes de moins de 50 réponses.</p>
</div>
<div class="section level3">
<h3 id="dépenses-tour_dep_xxx">Dépenses [tour_dep_xxx]<a class="anchor" aria-label="anchor" href="#d%C3%A9penses-tour_dep_xxx"></a>
</h3>
<p>8 variables de type <code>tour_dep_xxx</code> sont analysées en cherchant en cherchant le premier et dernier centile et en utilisant la méthode “1,5 x IQR”.</p>
<p>Le regroupement va dépendre des variables:</p>
<div class="section level4">
<h4 id="regroupement-par-categorie_corrige">Regroupement par [categorie_corrige]<a class="anchor" aria-label="anchor" href="#regroupement-par-categorie_corrige"></a>
</h4>
<p>Les dépenses suivantes sont regroupées par <code>categorie_corrige</code> avant la recherche de valeurs anormales:</p>
<ul>
<li>
<code>tour_dep_alim</code>,</li>
<li><code>tour_dep_activites</code></li>
<li><code>tour_dep_souvenirs</code></li>
<li><code>tour_dep_location</code></li>
<li><code>tour_dep_autres</code></li>
</ul>
</div>
<div class="section level4">
<h4 id="regroupement-par-mode_heb_regroupe">Regroupement par [mode_heb_regroupe]<a class="anchor" aria-label="anchor" href="#regroupement-par-mode_heb_regroupe"></a>
</h4>
<p>Les dépenses suivantes sont regroupées par <code>mode_heb_regroupe</code> avant la recherche de valeurs anormales:</p>
<ul>
<li>
<code>tour_dep_to_jour</code>,</li>
<li><code>tour_dep_heb</code></li>
</ul>
</div>
<div class="section level4">
<h4 id="dépenses-de-transport-tour_dep_transp">Dépenses de transport [tour_dep_transp]<a class="anchor" aria-label="anchor" href="#d%C3%A9penses-de-transport-tour_dep_transp"></a>
</h4>
<p>La détection d’anomalies sur <code>tour_dep_transp</code> est réalisée en effectuant un regroupement par la variable <code>mode_transp_jour</code> à condition qu’il y ait a minima 100 réponses par mode de transport. Les modes de transports plus rares sont regroupés ensemble.</p>
<p>Eva-Scan va aussi détecter les cas pour lesquels <code>mode_transport_jour</code> vaut “aucun” et qui ont cependant une valeur non nulle pour <code>tour_dep_transp</code></p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="exemple-de-traitement">Exemple de traitement<a class="anchor" aria-label="anchor" href="#exemple-de-traitement"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Calcul des categories corrigées</span>
<span class="va">categorie_corrige</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/process_evavelo.html">process_evavelo</a></span><span class="op">(</span>
  <span class="fu">evavelo</span><span class="fu">::</span><span class="va"><a href="../reference/evavelo_example_geocoded.html">evavelo_example_geocoded</a></span>
<span class="op">)</span><span class="op">$</span><span class="va">enquetes_post_traitement</span><span class="op">$</span><span class="va">categorie_corrige</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## Recherche des valeurs anormales</span>
<span class="fu"><a href="../reference/check_num_outliers.html">check_num_outliers</a></span><span class="op">(</span>evadata <span class="op">=</span> <span class="va">evavelo_example_geocoded</span>,
                   categorie_corrige <span class="op">=</span>  <span class="va">categorie_corrige</span><span class="op">)</span>
<span class="co">#&gt; $km_sortie</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 4</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   categorie_corrige [4]</span></span>
<span class="co">#&gt;    id_quest categorie_corrige km_sortie raison         </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 106aA24  Loisir                  100 dernier centile</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 106aA33  Loisir                    3 premier centile</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 141A9    Loisir                    3 premier centile</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 141A13   Loisir                   60 1.5 x IQR      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 141A20   Loisir                   70 1.5 x IQR      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 141A21   Loisir                   70 1.5 x IQR      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 141A22   Utilitaire               70 dernier centile</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 141A23   Sportif                  70 1.5 x IQR      </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 141A67   Itinérant                12 premier centile</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 106bA7   Sportif                   2 premier centile</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 106bA51  Sportif                 100 dernier centile</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 4A1      Utilitaire                4 premier centile</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $dms</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 6</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   mode_heb_regroupe, categorie_lump [6]</span></span>
<span class="co">#&gt;    id_quest mode_heb_regroupe       categorie_corri… categorie_lump   dms raison</span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 141A1    Hôtels/Chambres d'hôtes Itinérant        All               18 derni…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 141A5    <span style="color: #BB0000;">NA</span>                      Loisir           All                3 premi…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 141A13   Campings                Loisir           All                3 premi…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 141A24   Non marchand            Itinérant        All              120 derni…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 141A44   Non marchand            Itinérant        All               50 1.5 x…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 141A55   Hôtels/Chambres d'hôtes Loisir           All                2 premi…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 141A60   Hébergements locatifs   Loisir           All                4 premi…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 141A67   Campings                Itinérant        All              365 = 365 </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 106bA37  Campings                Itinérant        All               90 1.5 x…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 4A7      Hôtels/Chambres d'hôtes Loisir           All               15 1.5 x…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 4A18     Non marchand            Loisir           All               31 1.5 x…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 38A19    Hébergements locatifs   Loisir           All               21 derni…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 38A24    Auberges de jeunesse, … Itinérant        All               14 derni…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 38A25    Auberges de jeunesse, … Itinérant        All                7 premi…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 38A30    <span style="color: #BB0000;">NA</span>                      Loisir           All                5 derni…</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $revenu</span>
<span class="co">#&gt;   id_quest revenu          raison</span>
<span class="co">#&gt; 1  106aA29      0 premier centile</span>
<span class="co">#&gt; 2   141A40  20000 dernier centile</span>
<span class="co">#&gt; 3  106bA20  10000       1.5 x IQR</span>
<span class="co">#&gt; 4  106bA38  10000       1.5 x IQR</span>
<span class="co">#&gt; 5  106bA50  10000       1.5 x IQR</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $tour_dep_cat</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 0 × 4</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   depense, categorie_corrige [0]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 4 variables: id_quest &lt;chr&gt;, categorie_corrige &lt;chr&gt;, depense &lt;chr&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   valeur &lt;dbl&gt;</span></span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $tour_dep_heb</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   depense, mode_heb_regroupe [4]</span></span>
<span class="co">#&gt;   id_quest mode_heb_regroupe                               depense valeur raison</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 106aA12  Hôtels/Chambres d'hôtes                         tour_d…    160 derni…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 141A28   Campings                                        tour_d…     75 derni…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 106bA5   Hébergements locatifs                           tour_d…    300 derni…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 38A19    Hébergements locatifs                           tour_d…      9 premi…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 38A24    Auberges de jeunesse, gîte d’étapes, de groupes tour_d…     50 derni…</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 38A25    Auberges de jeunesse, gîte d’étapes, de groupes tour_d…     35 premi…</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $tour_dep_transp</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 0 × 4</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   mode_transp_lump [0]</span></span>
<span class="co">#&gt; <span style="color: #949494;"># … with 4 variables: id_quest &lt;chr&gt;, mode_transp_jour &lt;chr&gt;,</span></span>
<span class="co">#&gt; <span style="color: #949494;">#   tour_dep_transp &lt;dbl&gt;, mode_transp_lump &lt;chr&gt;</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jean-Marie Pivette.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
